{"ast":null,"code":"import _regeneratorRuntime from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import'bootstrap/dist/css/bootstrap.min.css';import{Link}from\"react-router-dom\";import{Cookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var client=axios.create({baseURL:\"http://127.0.0.1:8000/api/\"});function Users(){// axios.defaults.xsrfHeaderName = \"X-TOKENIZERS\";\n// axios.defaults.xsrfCookieName = \"tokenizers\";\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];useEffect(function(){// axios({\n//     method: \"GET\",\n//     url: 'http://127.0.0.1:8000/api/users/'\n// }).then(response => {\n//     setUsers(response.data)\n// })\nfunction getUsers(){return _getUsers.apply(this,arguments);}function _getUsers(){_getUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.get('/users/').then(function(response){setUsers(response.data);});case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return _getUsers.apply(this,arguments);}getUsers();},[]);function deleteUser(_x){return _deleteUser.apply(this,arguments);}function _deleteUser(){_deleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return client.delete(\"/users/\".concat(id),{},{},{allow:\"DELETE\"}).then(function(response){console.log(response);}).catch(function(error){console.log(error.response);});case 2:;alert(\"User deleted!\");setUsers();case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _deleteUser.apply(this,arguments);}var Dell=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios({method:'DELETE',url:\"http://127.0.0.1:8000/api/users/\".concat(id,\"/\")}).then(function(response){console.log(response);}).catch(function(error){console.log(error.response);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function Dell(_x2){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"User nickname\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Group\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(u){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:u.id}),/*#__PURE__*/_jsx(\"td\",{children:u.username}),/*#__PURE__*/_jsx(\"td\",{children:u.created}),/*#__PURE__*/_jsx(\"td\",{children:u.group.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-danger\",onClick:function onClick(){return deleteUser(u.id);},children:\"Delete\"})})]});})})]})});}export default Users;","map":{"version":3,"sources":["/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/src/components/Users/Users.js"],"names":["React","useState","useEffect","axios","Link","Cookies","client","create","baseURL","Users","users","setUsers","getUsers","get","then","response","data","deleteUser","id","delete","allow","console","log","catch","error","alert","Dell","method","url","map","u","username","created","group","name"],"mappings":"6gBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,sCAAP,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,OAAQC,OAAR,KAAsB,cAAtB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAGH,KAAK,CAACI,MAAN,CAAa,CACxBC,OAAO,CAAE,4BADe,CAAb,CAAf,CAIA,QAASC,CAAAA,KAAT,EAAiB,CACb;AACA;AAEA,cAA0BR,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eAEAT,SAAS,CAAC,UAAM,CACZ;AACA;AACA;AACA;AACA;AACA;AANY,QAOGU,CAAAA,QAPH,kIAOZ,sKAC2BN,CAAAA,MAAM,CAACO,GAAP,CAAW,SAAX,EAAsBC,IAAtB,CAA2B,SAAAC,QAAQ,CAAI,CAC1DJ,QAAQ,CAACI,QAAQ,CAACC,IAAV,CAAR,CACH,CAFsB,CAD3B,QACUD,QADV,qEAPY,2CAaZH,QAAQ,GACX,CAdQ,CAcN,EAdM,CAAT,CANa,QAsBEK,CAAAA,UAtBF,0IAsBb,kBAA0BC,EAA1B,6IACUZ,CAAAA,MAAM,CAACa,MAAP,kBAAwBD,EAAxB,EACF,EADE,CACE,EADF,CACM,CAACE,KAAK,CAAE,QAAR,CADN,EACyBN,IADzB,CAC8B,SAAAC,QAAQ,CAAI,CAC5CM,OAAO,CAACC,GAAR,CAAYP,QAAZ,EACH,CAHK,EAIDQ,KAJC,CAIK,SAAAC,KAAK,CAAI,CACZH,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACT,QAAlB,EACH,CANC,CADV,QAQI,CACAU,KAAK,CAAC,eAAD,CAAL,CACAd,QAAQ,GAVZ,wDAtBa,6CAmCb,GAAMe,CAAAA,IAAI,0FAAG,kBAAOR,EAAP,6IACHf,CAAAA,KAAK,CAAC,CACRwB,MAAM,CAAE,QADA,CAERC,GAAG,2CAAqCV,EAArC,KAFK,CAAD,CAAL,CAGHJ,IAHG,CAGE,SAAAC,QAAQ,CAAI,CAChBM,OAAO,CAACC,GAAR,CAAYP,QAAZ,EACH,CALK,EAMDQ,KANC,CAMK,SAAAC,KAAK,CAAI,CACZH,OAAO,CAACC,GAAR,CAAYE,KAAK,CAACT,QAAlB,EACH,CARC,CADG,yDAAH,kBAAJW,CAAAA,IAAI,6CAAV,CAaA,mBACI,YAAK,SAAS,CAAC,KAAf,uBACI,eAAO,SAAS,CAAC,OAAjB,wBACI,oCACA,mCACI,WAAI,KAAK,CAAC,KAAV,gBADJ,cAEI,WAAI,KAAK,CAAC,KAAV,2BAFJ,cAGI,WAAI,KAAK,CAAC,KAAV,qBAHJ,cAII,WAAI,KAAK,CAAC,KAAV,mBAJJ,GADA,EADJ,cASI,uBACChB,KAAK,CAACmB,GAAN,CAAU,SAAAC,CAAC,qBACR,mCACI,WAAI,KAAK,CAAC,KAAV,UAAiBA,CAAC,CAACZ,EAAnB,EADJ,cAEI,oBAAKY,CAAC,CAACC,QAAP,EAFJ,cAGI,oBAAKD,CAAC,CAACE,OAAP,EAHJ,cAII,oBAAKF,CAAC,CAACG,KAAF,CAAQC,IAAb,EAJJ,cAKI,iCAAI,KAAC,IAAD,EAAM,SAAS,CAAC,gBAAhB,CAAiC,OAAO,CAAE,yBAAMjB,CAAAA,UAAU,CAACa,CAAC,CAACZ,EAAH,CAAhB,EAA1C,oBAAJ,EALJ,GADQ,EAAX,CADD,EATJ,GADJ,EADJ,CA2BH,CAED,cAAeT,CAAAA,KAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Link} from \"react-router-dom\";\nimport {Cookies} from 'react-cookie';\n\nconst client = axios.create({\n    baseURL: \"http://127.0.0.1:8000/api/\"\n});\n\nfunction Users() {\n    // axios.defaults.xsrfHeaderName = \"X-TOKENIZERS\";\n    // axios.defaults.xsrfCookieName = \"tokenizers\";\n\n    const [users, setUsers] = useState([])\n\n    useEffect(() => {\n        // axios({\n        //     method: \"GET\",\n        //     url: 'http://127.0.0.1:8000/api/users/'\n        // }).then(response => {\n        //     setUsers(response.data)\n        // })\n        async function getUsers() {\n            const response = await client.get('/users/').then(response => {\n                setUsers(response.data)\n            });\n        }\n\n        getUsers();\n    }, [])\n\n    async function deleteUser(id) {\n        await client.delete(`/users/${id}`,\n            {}, {}, {allow: \"DELETE\"}).then(response => {\n            console.log(response)\n        })\n            .catch(error => {\n                console.log(error.response)\n            });\n        ;\n        alert(\"User deleted!\");\n        setUsers();\n    }\n\n    const Dell = async (id) => {\n        await axios({\n            method: 'DELETE',\n            url: `http://127.0.0.1:8000/api/users/${id}/`\n        }).then(response => {\n            console.log(response)\n        })\n            .catch(error => {\n                console.log(error.response)\n            });\n    }\n\n\n    return (\n        <div className=\"App\">\n            <table className=\"table\">\n                <thead>\n                <tr>\n                    <th scope=\"col\">Id</th>\n                    <th scope=\"col\">User nickname</th>\n                    <th scope=\"col\">Created</th>\n                    <th scope=\"col\">Group</th>\n                </tr>\n                </thead>\n                <tbody>\n                {users.map(u => (\n                    <tr>\n                        <th scope=\"row\">{u.id}</th>\n                        <td>{u.username}</td>\n                        <td>{u.created}</td>\n                        <td>{u.group.name}</td>\n                        <td><Link className=\"btn btn-danger\" onClick={() => deleteUser(u.id)}>Delete</Link></td>\n                    </tr>\n                ))}\n\n                </tbody>\n            </table>\n\n        </div>\n    );\n}\n\nexport default Users;\n"]},"metadata":{},"sourceType":"module"}