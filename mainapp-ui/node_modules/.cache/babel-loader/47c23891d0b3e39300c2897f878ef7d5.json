{"ast":null,"code":"import _regeneratorRuntime from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import'bootstrap/dist/css/bootstrap.min.css';import{Link}from\"react-router-dom\";import{Cookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var client=axios.create({baseURL:\"http://127.0.0.1:8000/api/\"});function Users(){axios.defaults.xsrfHeaderName=\"X-CSRFToken\";axios.defaults.xsrfCookieName=\"csrftoken\";axios.defaults.withCredentials=true;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];useEffect(function(){// axios({\n//     method: \"GET\",\n//     url: 'http://127.0.0.1:8000/api/users/'\n// }).then(response => {\n//     setUsers(response.data)\n// })\nfunction getUsers(){return _getUsers.apply(this,arguments);}function _getUsers(){_getUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return client.get('/users/').then(function(response){setUsers(response.data);});case 2:response=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return _getUsers.apply(this,arguments);}getUsers();},[]);function deleteUser(_x){return _deleteUser.apply(this,arguments);}function _deleteUser(){_deleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client({method:'DELETE',url:\"/users/\".concat(id),xsrfHeaderName:\"X-CSRFToken\"}).then(function(response){console.log(response);}).catch(function(error){console.log(error.response);});case 2:alert(\"User deleted!\");// setUsers();\ncase 3:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteUser.apply(this,arguments);}function Create(){return _Create.apply(this,arguments);}function _Create(){_Create=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return client.post(\"/users/\",{username:'marko',group:'23'},{xsrfHeaderName:'X-CSRF-Token',withCredentials:true}).then(function(response){console.log(response);}).catch(function(error){console.log(error.response);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _Create.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"User nickname\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Group\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(u){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:u.id}),/*#__PURE__*/_jsx(\"td\",{children:u.username}),/*#__PURE__*/_jsx(\"td\",{children:u.created}),/*#__PURE__*/_jsx(\"td\",{children:u.group.name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn btn-danger\",onClick:function onClick(){return deleteUser(u.id);},children:\"Delete\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{className:\"btn\",onClick:function onClick(){return Create();},children:\"Create\"})})]});})})]})});}export default Users;","map":{"version":3,"sources":["/home/markiian/PycharmProjects/testTaskProject/mainapp-ui/src/components/Users/Users.js"],"names":["React","useState","useEffect","axios","Link","Cookies","client","create","baseURL","Users","defaults","xsrfHeaderName","xsrfCookieName","withCredentials","users","setUsers","getUsers","get","then","response","data","deleteUser","id","method","url","console","log","catch","error","alert","Create","post","username","group","map","u","created","name"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport axios from \"axios\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Link} from \"react-router-dom\";\nimport {Cookies} from 'react-cookie';\n\nconst client = axios.create({\n    baseURL: \"http://127.0.0.1:8000/api/\"\n});\n\nfunction Users() {\n    axios.defaults.xsrfHeaderName = \"X-CSRFToken\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.withCredentials = true\n\n\n    const [users, setUsers] = useState([])\n\n    useEffect(() => {\n        // axios({\n        //     method: \"GET\",\n        //     url: 'http://127.0.0.1:8000/api/users/'\n        // }).then(response => {\n        //     setUsers(response.data)\n        // })\n        async function getUsers() {\n            const response = await client.get('/users/').then(response => {\n                setUsers(response.data)\n            });\n        }\n\n        getUsers();\n    }, [])\n\n    async function deleteUser(id) {\n        await client({\n            method: 'DELETE',\n            url: `/users/${id}`,\n            xsrfHeaderName: \"X-CSRFToken\"\n        }).then(response => {\n            console.log(response)\n        })\n            .catch(error => {\n                console.log(error.response)\n            });\n        alert(\"User deleted!\");\n        // setUsers();\n    }\n\n    async function Create() {\n        await client.post(`/users/`, {username: 'marko', group: '23'}, {\n            xsrfHeaderName: 'X-CSRF-Token',\n            withCredentials: true\n        }).then(response => {\n            console.log(response)\n        })\n            .catch(error => {\n                console.log(error.response)\n            });\n    }\n\n    return (\n        <div className=\"App\">\n            <table className=\"table\">\n                <thead>\n                <tr>\n                    <th scope=\"col\">Id</th>\n                    <th scope=\"col\">User nickname</th>\n                    <th scope=\"col\">Created</th>\n                    <th scope=\"col\">Group</th>\n                </tr>\n                </thead>\n                <tbody>\n                {users.map(u => (\n                    <tr>\n                        <th scope=\"row\">{u.id}</th>\n                        <td>{u.username}</td>\n                        <td>{u.created}</td>\n                        <td>{u.group.name}</td>\n                        <td><Link className=\"btn btn-danger\" onClick={() => deleteUser(u.id)}>Delete</Link></td>\n                        <td><Link className=\"btn\" onClick={() => Create()}>Create</Link></td>\n                    </tr>\n                ))}\n\n\n                </tbody>\n            </table>\n\n        </div>\n    );\n}\n\nexport default Users;\n"]},"metadata":{},"sourceType":"module"}